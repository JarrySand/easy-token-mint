# Admin権限冗長化ガイドライン

## 1. 概要

スマートコントラクトのAdmin権限（DEFAULT_ADMIN_ROLE）は、トークンの発行権限や他の権限を管理する最上位の権限です。この権限が失われると、トークンの管理が不可能になる可能性があります。

このガイドラインでは、Admin権限の安全な冗長化について説明します。

## 2. なぜ冗長化が必要か

### 2.1 リスク

- 秘密鍵の紛失・漏洩
- ハードウェア障害
- 担当者の離職・異動
- 災害・事故

### 2.2 影響

Admin権限を持つアドレスが1つしかない場合：

- 秘密鍵を失うと権限管理が不可能に
- 新しいミンターの追加ができない
- 既存ミンターの権限取り消しができない
- 緊急時の対応ができない

## 3. 推奨構成

### 3.1 基本構成（推奨）

**最低2つのアドレス**にDEFAULT_ADMIN_ROLEを付与してください。

```
アドレスA: 日常運用用（ホットウォレット）
アドレスB: バックアップ用（コールドウォレット）
```

### 3.2 推奨構成

**3つ以上のアドレス**への分散を推奨します。

```
アドレスA: 日常運用用
アドレスB: バックアップ用（コールドウォレット）
アドレスC: 緊急用（別拠点保管）
```

## 4. コールドウォレットの活用

### 4.1 コールドウォレットとは

インターネットに接続されていないウォレットです。

- ハードウェアウォレット（Ledger, Trezorなど）
- エアギャップPC上のウォレット
- ペーパーウォレット

### 4.2 推奨事項

- バックアップ用のAdmin権限は**必ずコールドウォレット**に付与
- 日常的にはホットウォレットを使用
- 緊急時のみコールドウォレットを使用

## 5. 権限付与手順

### 5.1 新しいAdminの追加

1. 既存のAdmin権限を持つアドレスでログイン
2. 権限管理画面を開く
3. 新しいアドレスにDEFAULT_ADMIN_ROLEを付与
4. トランザクションを確認・実行

### 5.2 確認事項

- 付与先アドレスが正しいか確認
- 付与後、新しいアドレスで権限が確認できるかテスト

## 6. 組織内での管理

### 6.1 文書化

以下の情報を安全に文書化・保管してください：

- Admin権限を持つ全アドレスの一覧
- 各アドレスの用途と保管場所
- 緊急連絡先
- アクセス手順

### 6.2 アクセス管理

- Admin権限へのアクセスは必要最小限の人員に限定
- アクセス権限を持つ担当者のリストを管理
- 担当者変更時の引き継ぎ手順を明確化

### 6.3 定期的な確認

- 四半期ごとにAdmin権限の状態を確認
- コールドウォレットの動作確認（年1回以上）
- 担当者リストの更新確認

## 7. 緊急時の対応

### 7.1 秘密鍵紛失時

1. 残りのAdmin権限を持つアドレスを確認
2. 紛失したアドレスのAdmin権限を取り消し
3. 新しいバックアップアドレスにAdmin権限を付与
4. 紛失した秘密鍵が漏洩した可能性がある場合は追加対策

### 7.2 不正アクセス時

1. 被害アドレスのAdmin権限を即座に取り消し
2. 全てのMINTER_ROLEを確認・必要に応じて取り消し
3. 新しいアドレスで権限を再構築

## 8. チェックリスト

### デプロイ時

- [ ] 2つ以上のアドレスにAdmin権限を付与した
- [ ] 少なくとも1つはコールドウォレット
- [ ] 権限付与を確認テストした
- [ ] 文書化を完了した

### 運用時

- [ ] 定期的にAdmin権限の状態を確認している
- [ ] 担当者リストが最新である
- [ ] コールドウォレットの動作確認を行っている
- [ ] 緊急時の対応手順が共有されている

---

**最終更新日:** 2026年1月
**対象バージョン:** 1.0.0
